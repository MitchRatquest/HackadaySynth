#N canvas 880 280 1134 695 12;
#X obj 157 403 *~;
#X obj 360 219 line~;
#X obj 360 193 pack 0 200;
#X obj 139 160 exp;
#X obj 139 296 /;
#X obj 266 190 * 0.001;
#X obj 527 454 line~;
#X obj 527 429 pack 0 200;
#X obj 157 429 +~;
#X obj 94 455 cos~;
#X obj 94 482 *~;
#X obj 94 511 +~;
#X obj 348 418 wrap~;
#X obj 418 483 *~;
#X obj 418 516 +~;
#X obj 355 543 cos~;
#X obj 355 570 *~;
#X obj 266 217 t b f;
#X obj 346 373 +~ 0.5;
#X obj 94 403 -~ 0.5;
#X obj 94 429 *~ 0.5;
#X obj 355 482 -~ 0.5;
#X obj 355 515 *~ 0.5;
#X obj 139 197 - 1;
#X obj 139 130 * 0.05776;
#X obj 139 223 * -1;
#X text 202 164 speed;
#X text 201 178 change;
#X text 191 288 tape head;
#X obj 85 335 phasor~;
#X obj 527 405 max 1.5;
#X obj 337 142 max 1;
#X text 192 301 rotation freq;
#X obj 313 661 outlet~;
#X obj 33 86 inlet~;
#X obj 543 43 inlet;
#X obj 759 25 inlet;
#X obj 845 108 inlet;
#X obj 598 132 inlet;
#X text 638 106 feedback;
#X obj 599 168 max -1;
#X obj 599 193 min 1;
#X obj 599 219 pack 0 50;
#X obj 600 243 line~;
#X obj 83 580 *~;
#X obj 32 616 +~;
#X text 434 348 delay (ms);
#N canvas 1097 300 771 614 \$0-dkpshift-defaults 0;
#X obj 96 87 loadbang;
#X obj 79 312 pack \$0 f f f f, f 46;
#X obj 121 182 f \$1;
#X text 170 183 transpose;
#X obj 90 121 t b b b b b, f 56;
#X text 525 185 delay;
#X msg 359 236 50;
#X obj 386 176 f \$3;
#X text 417 156 window;
#X text 313 171 fb;
#X obj 359 214 moses 1e-20;
#X obj 479 183 f \$4;
#X obj 254 187 f \$2;
#X msg 82 364 \; \$1-dkpshift_transpose \$2 \; \$1-dkpshift_fb \$3
\; \$1-dkpshift_window \$4 \; \$1-dkpshift_delay \$5 \;;
#X connect 0 0 4 0;
#X connect 1 0 13 0;
#X connect 2 0 1 1;
#X connect 4 0 1 0;
#X connect 4 1 2 0;
#X connect 4 2 12 0;
#X connect 4 3 7 0;
#X connect 4 4 11 0;
#X connect 6 0 1 3;
#X connect 7 0 10 0;
#X connect 10 0 6 0;
#X connect 10 1 1 3;
#X connect 11 0 1 4;
#X connect 12 0 1 2;
#X restore 587 316 pd \$0-dkpshift-defaults;
#X obj 137 94 r \$0-dkpshift_transpose;
#X obj 346 97 r \$0-dkpshift_window;
#X text 381 71 window (msec);
#X text 131 69 transposition (halfsteps);
#X obj 527 352 r \$0-dkpshift_delay;
#X obj 34 657 delwrite~ \$0-dkpshift_del 5000;
#X obj 142 459 delread4~ \$0-dkpshift_del;
#X obj 418 545 delread4~ \$0-dkpshift_del;
#X obj 542 83 s \$0-dkpshift_transpose;
#X obj 844 143 s \$0-dkpshift_delay;
#X obj 762 62 s \$0-dkpshift_window;
#X text 19 27 based on M. Puckette's Saariaho NoaNoa patch;
#X text 595 42 transpose;
#X text 891 111 delay;
#X text 818 29 window;
#X text 887 347 derek kwan;
#X text 891 371 pdkvabs;
#X text 898 402 gpl v 3;
#X text 19 5 dkpshift~: rotating tape head pitch shifter;
#X obj 600 268 s~ \$0-dkpshift_fbsig;
#X obj 120 556 r~ \$0-dkpshift_fbsig;
#X obj 686 122 r \$0-dkpshift_fb;
#X text 633 538 in1: sig~ \, in2: transpose \, in3: fb;
#X text 637 561 in4: window \, in5: delay;
#X text 632 622 args: transposition (0) \, fb (0.5) \, window (50)
\, delay (0);
#X connect 0 0 8 0;
#X connect 1 0 0 1;
#X connect 1 0 13 1;
#X connect 2 0 1 0;
#X connect 3 0 23 0;
#X connect 4 0 29 0;
#X connect 5 0 17 0;
#X connect 6 0 8 1;
#X connect 6 0 14 1;
#X connect 7 0 6 0;
#X connect 8 0 54 0;
#X connect 9 0 10 0;
#X connect 10 0 11 0;
#X connect 11 0 44 0;
#X connect 11 0 33 0;
#X connect 12 0 13 0;
#X connect 12 0 21 0;
#X connect 13 0 14 0;
#X connect 14 0 55 0;
#X connect 15 0 16 0;
#X connect 16 0 11 1;
#X connect 17 0 4 0;
#X connect 17 1 4 1;
#X connect 18 0 12 0;
#X connect 19 0 20 0;
#X connect 20 0 9 0;
#X connect 21 0 22 0;
#X connect 22 0 15 0;
#X connect 23 0 25 0;
#X connect 24 0 3 0;
#X connect 25 0 4 0;
#X connect 29 0 0 0;
#X connect 29 0 19 0;
#X connect 29 0 18 0;
#X connect 30 0 7 0;
#X connect 31 0 5 0;
#X connect 31 0 2 0;
#X connect 34 0 45 0;
#X connect 35 0 56 0;
#X connect 36 0 58 0;
#X connect 37 0 57 0;
#X connect 38 0 40 0;
#X connect 40 0 41 0;
#X connect 41 0 42 0;
#X connect 42 0 43 0;
#X connect 43 0 67 0;
#X connect 44 0 45 1;
#X connect 45 0 53 0;
#X connect 48 0 24 0;
#X connect 49 0 31 0;
#X connect 52 0 30 0;
#X connect 54 0 10 1;
#X connect 55 0 16 1;
#X connect 68 0 44 1;
#X connect 69 0 40 0;
