#N canvas 345 237 1132 787 12;
#X obj 153 472 * 0.001;
#X obj 153 447 samplerate~;
#X obj 98 494 /;
#X obj 80 400 t b b;
#X obj 121 141 env~ \$1;
#X obj 133 355 loadbang;
#X obj 66 18 inlet~;
#X obj 13 61 delwrite~ \$0-dkvancmp 500;
#X obj 85 442 f \$1;
#X obj 314 218 moses 100, f 17;
#X obj 122 185 moses 5, f 26;
#X msg 269 412 1;
#X obj 267 468 pack f 5;
#X text 303 386 release time;
#X text 356 481 attack time;
#X obj 334 506 pack f 5;
#X text 89 302 below thresh/compress up;
#X text 433 367 above thresh/limit down;
#X obj 270 538 line~;
#X obj 216 665 *~;
#X text 59 560 delay read time;
#X obj 65 590 delread4~ \$0-dkvancmp;
#X obj 216 690 outlet~;
#X text 671 362 based on pd-tutorial's 3.9.1.2;
#X text 672 339 DKVANCOMP~ - vanilla compressor/limiter;
#X obj 374 444 sqrt;
#X obj 270 563 *~;
#X text 319 577 squared amp adjustment;
#X obj 290 86 route thresh_lo thresh_hi factor_lo factor_hi attack
release;
#X obj 307 338 loadbang;
#N canvas 416 527 1134 616 dkvancomp_defaults 0;
#X msg 142 291 100;
#X obj 544 275 moses 1;
#X obj 303 288 moses 1;
#X msg 303 313 2;
#X obj 708 311 moses 1;
#X msg 708 336 5;
#X obj 821 315 moses 1;
#X msg 821 340 5;
#X obj 411 275 moses 1e-20;
#X obj 142 266 moses 1e-20;
#X obj 703 268 f \$6;
#X obj 816 272 f \$7;
#X msg 411 347 thresh_lo \$1;
#X obj 171 502 outlet;
#X msg 142 340 thresh_hi \$1;
#X msg 544 324 factor_lo \$1;
#X msg 303 337 factor_hi \$1;
#X msg 708 360 attack \$1;
#X msg 821 364 release \$1;
#X obj 136 122 loadbang;
#X obj 136 146 t b b b b b b, f 99;
#X obj 137 223 f \$2;
#X obj 298 245 f \$3;
#X obj 406 231 f \$4;
#X obj 539 232 f \$5;
#X msg 411 298 1;
#X msg 544 300 1;
#X connect 0 0 14 0;
#X connect 1 0 26 0;
#X connect 1 1 15 0;
#X connect 2 0 3 0;
#X connect 2 1 16 0;
#X connect 3 0 16 0;
#X connect 4 0 5 0;
#X connect 4 1 17 0;
#X connect 5 0 17 0;
#X connect 6 0 7 0;
#X connect 6 1 18 0;
#X connect 7 0 18 0;
#X connect 8 0 25 0;
#X connect 8 1 12 0;
#X connect 9 0 0 0;
#X connect 9 1 14 0;
#X connect 10 0 4 0;
#X connect 11 0 6 0;
#X connect 12 0 13 0;
#X connect 14 0 13 0;
#X connect 15 0 13 0;
#X connect 16 0 13 0;
#X connect 17 0 13 0;
#X connect 18 0 13 0;
#X connect 19 0 20 0;
#X connect 20 0 21 0;
#X connect 20 1 22 0;
#X connect 20 2 23 0;
#X connect 20 3 24 0;
#X connect 20 4 10 0;
#X connect 20 5 11 0;
#X connect 21 0 9 0;
#X connect 22 0 2 0;
#X connect 23 0 8 0;
#X connect 24 0 1 0;
#X connect 25 0 12 0;
#X connect 26 0 15 0;
#X restore 381 48 pd dkvancomp_defaults;
#N canvas 525 312 690 501 dkvancomp_complim 0;
#X obj 76 31 inlet indb;
#X text 172 29 incoming signal's db;
#X obj 95 99 -;
#X text 132 102 dist from ref point;
#X obj 95 124 t f f;
#X obj 96 164 /;
#X obj 540 31 inlet reference;
#X obj 385 33 inlet factor;
#X text 360 74 compression/limiter factor;
#X obj 102 209 -;
#X text 134 164 scale by factor;
#X text 161 192 amt to increase/dec (dist of scaled from diff from
reference);
#X obj 102 234 + 100;
#X text 163 240 add to full scale db;
#X obj 96 269 dbtorms;
#X obj 96 315 outlet;
#X text 162 296 convert to rms for mult amt;
#X connect 0 0 2 0;
#X connect 2 0 4 0;
#X connect 4 0 5 0;
#X connect 4 1 9 1;
#X connect 5 0 9 0;
#X connect 6 0 2 1;
#X connect 7 0 5 1;
#X connect 9 0 12 0;
#X connect 12 0 14 0;
#X connect 14 0 15 0;
#X restore 119 259 pd dkvancomp_complim;
#N canvas 525 312 690 501 dkvancomp_complim 0;
#X obj 76 31 inlet indb;
#X text 172 29 incoming signal's db;
#X obj 95 99 -;
#X text 132 102 dist from ref point;
#X obj 95 124 t f f;
#X obj 96 164 /;
#X obj 540 31 inlet reference;
#X obj 385 33 inlet factor;
#X text 360 74 compression/limiter factor;
#X obj 102 209 -;
#X text 134 164 scale by factor;
#X text 161 192 amt to increase/dec (dist of scaled from diff from
reference);
#X obj 102 234 + 100;
#X text 163 240 add to full scale db;
#X obj 96 269 dbtorms;
#X obj 96 315 outlet;
#X text 162 296 convert to rms for mult amt;
#X connect 0 0 2 0;
#X connect 2 0 4 0;
#X connect 4 0 5 0;
#X connect 4 1 9 1;
#X connect 5 0 9 0;
#X connect 6 0 2 1;
#X connect 7 0 5 1;
#X connect 9 0 12 0;
#X connect 12 0 14 0;
#X connect 14 0 15 0;
#X restore 397 300 pd dkvancomp_complim;
#X obj 266 22 inlet;
#X text 657 165 args: analysis size (required) \,;
#X text 703 249 attack time in ms (* 5) \, release time in ms (* 5)
;
#X text 710 193 thresh_hi in dB (* 100) \, factor_hi (downscaling \,
* 2);
#X text 712 217 thresh_lo (* 1) \, factor_lo (upscaling \, * 1);
#X connect 0 0 2 1;
#X connect 1 0 0 0;
#X connect 2 0 21 0;
#X connect 3 0 8 0;
#X connect 3 1 1 0;
#X connect 4 0 10 0;
#X connect 5 0 3 0;
#X connect 6 0 4 0;
#X connect 6 0 7 0;
#X connect 8 0 2 0;
#X connect 9 0 11 0;
#X connect 9 1 32 0;
#X connect 10 0 31 0;
#X connect 10 1 9 0;
#X connect 11 0 12 0;
#X connect 12 0 18 0;
#X connect 15 0 18 0;
#X connect 18 0 26 0;
#X connect 18 0 26 1;
#X connect 19 0 22 0;
#X connect 21 0 19 0;
#X connect 25 0 15 0;
#X connect 26 0 19 1;
#X connect 28 0 10 1;
#X connect 28 0 31 2;
#X connect 28 1 9 1;
#X connect 28 1 32 2;
#X connect 28 2 31 1;
#X connect 28 3 32 1;
#X connect 28 4 15 1;
#X connect 28 5 12 1;
#X connect 29 0 11 0;
#X connect 30 0 28 0;
#X connect 31 0 25 0;
#X connect 32 0 25 0;
#X connect 33 0 28 0;
